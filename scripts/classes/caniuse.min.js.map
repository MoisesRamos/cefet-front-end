{"version":3,"sources":["node_modules/browser-pack/_prelude.js","scripts/classes/caniuse.js"],"names":[],"mappings":"AAAA;ACAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"caniuse.min.js","sourcesContent":["(function e(t,n,r){function s(o,u){if(!n[o]){if(!t[o]){var a=typeof require==\"function\"&&require;if(!u&&a)return a(o,!0);if(i)return i(o,!0);var f=new Error(\"Cannot find module '\"+o+\"'\");throw f.code=\"MODULE_NOT_FOUND\",f}var l=n[o]={exports:{}};t[o][0].call(l.exports,function(e){var n=t[o][1][e];return s(n?n:e)},l,l.exports,e,t,n,r)}return n[o].exports}var i=typeof require==\"function\"&&require;for(var o=0;o<r.length;o++)s(r[o]);return s})","/*jshint curly: true, eqeqeq: true, immed: true, indent: 4, browser: true, jquery: true, evil: true, regexdash: true, browser: true, trailing: true, sub: true, unused: true, devel: true */\r\n\r\n// author: andi smith\r\n// website: www.andismith.com\r\n// version: 0.1\r\n\r\nvar canIUse = (function () {\r\n\r\n    /*  CONFIGURATION =-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=- */\r\n\r\n    //  URL to the data feed\r\n    var SOURCE_DATA_URL = 'https://raw.github.com/Fyrd/caniuse/master/data.json';\r\n\r\n    /*  Turn auto run on page load on or off with AUTO_RUN.\r\n        If you turn it off, just use canIUse.render() to kick it off again.\r\n        If you don't want the WhenCanIUse data to load in the background, turn BE_READY to false.\r\n    */\r\n    var AUTO_RUN = true,\r\n        BE_READY = true;\r\n\r\n    /*  Configure the browsers you want to show here.\r\n        The order defines the order they will appear on the page.\r\n\r\n        Browser options are:\r\n        * android   - Android\r\n        * and_ff    - Android Firefox\r\n        * and_chr   - Android Chrome\r\n        * bb        - Blackberry\r\n        * chrome    - Google Chrome\r\n        * firefox   - Mozilla Firefox\r\n        * ie        - Internet Explorer\r\n        * ios_saf   - iOS Safari\r\n        * opera     - Opera\r\n        * op_mini   - Opera Mini\r\n        * op_mob    - Opera Mobile\r\n        * safari    - Apple Safari\r\n    */\r\n    var BROWSERS = ['chrome', 'firefox', 'ie', 'opera', 'safari'];\r\n\r\n    //  Customise HTML here\r\n    var TMPL_TITLE = '<h2>{title}</h2>', // feature title {title}\r\n        TMPL_STATUS = '<p class=\"status\">{status}</p>', // feature status (W3C Recommendation) {status}\r\n        TMPL_DESCRIPTION = '<p>Suportado a partir de:</p>', // description to user\r\n        TMPL_DESKTOP_TITLE = '', // desktop header\r\n        TMPL_MOBILE_TITLE = '', // mobile header\r\n        TMPL_SUPPORT_WRAPPER = '<ul class=\"agents\">{items}</ul>', // support wrapper {items}\r\n        TMPL_SUPPORT = '<li title=\"{browser} - {support}\" class=\"icon-{browsercode} {supportcode}\"><span class=\"version\">{version}{prefixed}</span></li>',\r\n        TMPL_PREFIX_NOTE = '<p>* requer prefixo.</p>',\r\n        TMPL_LEGEND = '<ul class=\"legend\"><li>Legenda:</li><li class=\"y\">Sim</li><li class=\"n\">Não</li><li class=\"a\">Parcial</li><li class=\"p\">Polyfill</li></ul>',\r\n        TMPL_FOOTER = '<p class=\"stats\">Dados de <a href=\"http://caniuse.com/#feat={feature}\" target=\"_blank\">caniuse.com</a></p>',\r\n        TMPL_LOADING = '<h2>Carregando</h2>',\r\n        TMPL_ERROR = '<h2>Erro</h2><p>Feature \"{feature}\" não encontrada!</p>';\r\n\r\n    /* END CONFIGURATION =-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=- */\r\n\r\n    var canIUseData, // store data for multiple uses.\r\n        storeElementId, // temp storage for elementId if we need to JSONP request\r\n        populateOnLoad; // temp storage for if we should populate\r\n\r\n\r\n\r\n    // get feature data based on feature name\r\n    function getFeature(featureName) {\r\n        featureName = featureName.toLowerCase();\r\n        if (canIUseData.query) {\r\n            return canIUseData.query.results.json.data[featureName];\r\n        } else if (canIUseData.data) {\r\n            return canIUseData.data[featureName];\r\n        } else {\r\n            return null;\r\n        }\r\n    }\r\n\r\n    // get the full text description for the support status\r\n    function getSupportStatus(key) {\r\n        var status = {\r\n            \"y\": \"Yes\",\r\n            \"x\": \"With Prefix\",\r\n            \"n\": \"No\",\r\n            \"a\": \"Partial Support\",\r\n            \"p\": \"Polyfill\",\r\n            \"u\": \"Unknown\"\r\n        };\r\n\r\n        return status[key];\r\n    }\r\n\r\n    // get the specification status\r\n    function getSpecStatus(key) {\r\n        var status = {\r\n            \"rec\": \"W3C Recommendation\",\r\n            \"pr\": \"W3C Proposed Recommendation\",\r\n            \"cr\": \"W3C Candidate Recommendation\",\r\n            \"wd\": \"W3C Working Draft\",\r\n            \"other\": \"Non-W3C, but Reputable\",\r\n            \"unoff\": \"Unofficial or W3C 'Note'\"\r\n        };\r\n\r\n        return status[key] || \"Unknown\";\r\n    }\r\n\r\n    // find the first version that had this status\r\n    function find(needle, haystack) {\r\n\r\n        var result = {\r\n                \"version\": -1,\r\n                \"prefixed\": false\r\n            },\r\n            compare = -1;\r\n\r\n        for (var item in haystack) {\r\n            if (haystack.hasOwnProperty(item) && haystack[item].indexOf(needle) > -1) {\r\n                // some browser versions are formatted n-n, take the first number for comparison\r\n                compare = parseFloat(item.split('-')[0]);\r\n                // is this version lower than the current version we have stored?\r\n                if (result.version === -1 || result.version > compare) {\r\n                    result.version = compare;\r\n                    result.prefixed = (haystack[item].indexOf('x') > -1);\r\n                }\r\n            }\r\n        }\r\n        return result;\r\n    }\r\n\r\n    function findSupport(browserData) {\r\n        var status = ['y', 'a', 'p'],\r\n            result = {};\r\n        // find what support is available for this browser\r\n        for (var i = 0; i < status.length; i++) {\r\n            result = find(status[i], browserData);\r\n            if (result.version !== -1) {\r\n                return {\r\n                    'result': status[i], // what type of support\r\n                    'prefixed': result.prefixed,\r\n                    'version': (result.version !== '0') ? result.version : '0' // the version with that support\r\n                };\r\n            }\r\n        }\r\n        return {\r\n            'result': 'n',\r\n            'prefixed': false,\r\n            'version': 'No'\r\n        };\r\n    }\r\n\r\n    /* put the data in a more platable format */\r\n    function generateResults(feature) {\r\n        var agents = {},\r\n            results = {},\r\n            currentBrowser = '',\r\n            support = {};\r\n\r\n        agents = canIUseData.agents || canIUseData.query.results.json.agents;\r\n\r\n        results.title = feature.title; // feature name\r\n        results.code = feature; // feature code?\r\n        results.status = getSpecStatus(feature.status); // feature specification status\r\n        results.agents = [];\r\n\r\n        for (var i = 0, l = BROWSERS.length; i < l; i++) {\r\n\r\n            currentBrowser = BROWSERS[i];\r\n\r\n            if (agents[currentBrowser]) {\r\n\r\n                support = findSupport(feature.stats[BROWSERS[i]]);\r\n\r\n                results.agents.push({\r\n                    \"browsercode\": currentBrowser,\r\n                    \"prefixed\": support.prefixed,\r\n                    \"supportcode\": support.result,\r\n                    \"support\": getSupportStatus(support.result),\r\n                    \"title\": agents[currentBrowser].browser,\r\n                    \"type\": agents[currentBrowser].type.toLowerCase(),\r\n                    \"version\": support.version\r\n                });\r\n            }\r\n        }\r\n\r\n        return results;\r\n    }\r\n\r\n\r\n    function generateHtml(results) {\r\n\r\n        var html = '',\r\n            resultHtml = '',\r\n            desktopHtml = '',\r\n            mobileHtml = '',\r\n            prefixes = false,\r\n            result = {},\r\n            i = 0,\r\n            l = 0;\r\n\r\n        resultHtml = TMPL_TITLE.replace('{title}', results.title);\r\n        resultHtml += TMPL_STATUS.replace('{status}', results.status);\r\n        resultHtml += TMPL_DESCRIPTION;\r\n\r\n        for (i = 0, l = results.agents.length; i < l; i++) {\r\n            result = results.agents[i]; // simply things\r\n\r\n            // we need to show that prefix notice, captain\r\n            if (result.prefixed) {\r\n                prefixes = true;\r\n            }\r\n\r\n            html = TMPL_SUPPORT.replace(/\\{browsercode\\}/g, result.browsercode)\r\n                                    .replace(/\\{prefixed\\}/g, (result.prefixed === true) ? '*' : '')\r\n                                    .replace(/\\{supportcode\\}/g, result.supportcode)\r\n                                    .replace(/\\{support\\}/g, result.support)\r\n                                    .replace(/\\{browser\\}/g, result.title)\r\n                                    .replace(/\\{version\\}/g, result.version);\r\n\r\n            if (result.type === 'desktop') {\r\n                desktopHtml += html;\r\n            } else if (result.type === 'mobile') {\r\n                mobileHtml += html;\r\n            }\r\n        }\r\n\r\n        // only show if we are including desktop browsers\r\n        if (desktopHtml !== '') {\r\n            resultHtml += TMPL_DESKTOP_TITLE;\r\n            resultHtml += TMPL_SUPPORT_WRAPPER.replace(/\\{items\\}/g, desktopHtml);\r\n        }\r\n\r\n        // only show if we are including mobile browsers\r\n        if (mobileHtml !== '') {\r\n            resultHtml += TMPL_MOBILE_TITLE;\r\n            resultHtml += TMPL_SUPPORT_WRAPPER.replace(/\\{items\\}/g, mobileHtml);\r\n        }\r\n\r\n        if (prefixes) {\r\n            resultHtml += TMPL_PREFIX_NOTE;\r\n        }\r\n\r\n        resultHtml += TMPL_LEGEND;\r\n        resultHtml += TMPL_FOOTER.replace(/\\{feature\\}/g, results.featureCode);\r\n        return resultHtml;\r\n    }\r\n\r\n    function generate(elementId) {\r\n        var $canIUse = [],\r\n            $instance,\r\n            featureCode = '',\r\n            feature = {},\r\n            result = {},\r\n            i = 0,\r\n            l = 0;\r\n\r\n        if (typeof elementId === \"undefined\") {\r\n            $canIUse = document.querySelectorAll('.caniuse');\r\n        } else {\r\n            $canIUse.push(document.getElementById(elementId));\r\n        }\r\n\r\n        l = $canIUse.length;\r\n\r\n        for (i = 0; i < l; i++) {\r\n            $instance = $canIUse[i];\r\n            featureCode = $instance.getAttribute('data-feature') || 'unknown';\r\n            feature = getFeature(featureCode);\r\n            if (feature) {\r\n                result = generateResults(feature);\r\n                result.featureCode = featureCode;\r\n                $instance.innerHTML = generateHtml(result);\r\n            } else {\r\n                $instance.innerHTML = TMPL_ERROR.replace(/\\{feature\\}/g, featureCode);\r\n            }\r\n        }\r\n    }\r\n\r\n    function showLoading(elementId) {\r\n        var $canIUse = [],\r\n            $instance,\r\n            i = 0,\r\n            l = 0;\r\n\r\n        if (typeof elementId === \"undefined\") {\r\n            $canIUse = document.querySelectorAll('.caniuse');\r\n        } else {\r\n            $canIUse.push(document.getElementById(elementId));\r\n        }\r\n\r\n        l = $canIUse.length;\r\n\r\n        for (i = 0; i < l; i++) {\r\n            $instance = $canIUse[i];\r\n            $instance.innerHTML = TMPL_LOADING;\r\n        }\r\n    }\r\n\r\n    /*\r\n     * Load the data that will be used to display information.\r\n     */\r\n    function loadData(elementId, populate) {\r\n        var url = '',\r\n            script = document.createElement('SCRIPT');\r\n\r\n        url = 'http://query.yahooapis.com/v1/public/yql?q=' +\r\n            'select * from json where url = \\'' + SOURCE_DATA_URL + '\\'' +\r\n            '&format=json&jsonCompat=new&callback=canIUseDataLoaded';\r\n\r\n        // remember these for when our JSONP returns\r\n        storeElementId = elementId;\r\n        populateOnLoad = populate;\r\n\r\n        script.src = url;\r\n        document.body.appendChild(script);\r\n    }\r\n\r\n    function populate(elementId) {\r\n        if (typeof canIUseData === 'undefined') {\r\n            showLoading(elementId);\r\n            loadData(elementId, true);\r\n        } else {\r\n            generate(elementId);\r\n        }\r\n    }\r\n\r\n    /*\r\n     * Public Methods\r\n     */\r\n    return {\r\n        render: populate,\r\n        dataLoaded: function (data) {\r\n            canIUseData = data;\r\n            if (populateOnLoad) {\r\n                generate(storeElementId);\r\n            }\r\n        },\r\n        init: (function () {\r\n            if (AUTO_RUN) {\r\n                populate();\r\n            } else if (BE_READY) {\r\n                loadData(undefined, false);\r\n            }\r\n        })()\r\n    };\r\n}());\r\n\r\nwindow.canIUseDataLoaded = function canIUseDataLoaded(data) {\r\n    canIUse.dataLoaded(data);\r\n};\r\n"],"preExistingComment":"//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIm5vZGVfbW9kdWxlcy9icm93c2VyLXBhY2svX3ByZWx1ZGUuanMiLCJzY3JpcHRzL2NsYXNzZXMvY2FuaXVzZS5qcyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFBQTtBQ0FBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSIsImZpbGUiOiJnZW5lcmF0ZWQuanMiLCJzb3VyY2VSb290IjoiIiwic291cmNlc0NvbnRlbnQiOlsiKGZ1bmN0aW9uIGUodCxuLHIpe2Z1bmN0aW9uIHMobyx1KXtpZighbltvXSl7aWYoIXRbb10pe3ZhciBhPXR5cGVvZiByZXF1aXJlPT1cImZ1bmN0aW9uXCImJnJlcXVpcmU7aWYoIXUmJmEpcmV0dXJuIGEobywhMCk7aWYoaSlyZXR1cm4gaShvLCEwKTt2YXIgZj1uZXcgRXJyb3IoXCJDYW5ub3QgZmluZCBtb2R1bGUgJ1wiK28rXCInXCIpO3Rocm93IGYuY29kZT1cIk1PRFVMRV9OT1RfRk9VTkRcIixmfXZhciBsPW5bb109e2V4cG9ydHM6e319O3Rbb11bMF0uY2FsbChsLmV4cG9ydHMsZnVuY3Rpb24oZSl7dmFyIG49dFtvXVsxXVtlXTtyZXR1cm4gcyhuP246ZSl9LGwsbC5leHBvcnRzLGUsdCxuLHIpfXJldHVybiBuW29dLmV4cG9ydHN9dmFyIGk9dHlwZW9mIHJlcXVpcmU9PVwiZnVuY3Rpb25cIiYmcmVxdWlyZTtmb3IodmFyIG89MDtvPHIubGVuZ3RoO28rKylzKHJbb10pO3JldHVybiBzfSkiLCIvKmpzaGludCBjdXJseTogdHJ1ZSwgZXFlcWVxOiB0cnVlLCBpbW1lZDogdHJ1ZSwgaW5kZW50OiA0LCBicm93c2VyOiB0cnVlLCBqcXVlcnk6IHRydWUsIGV2aWw6IHRydWUsIHJlZ2V4ZGFzaDogdHJ1ZSwgYnJvd3NlcjogdHJ1ZSwgdHJhaWxpbmc6IHRydWUsIHN1YjogdHJ1ZSwgdW51c2VkOiB0cnVlLCBkZXZlbDogdHJ1ZSAqL1xyXG5cclxuLy8gYXV0aG9yOiBhbmRpIHNtaXRoXHJcbi8vIHdlYnNpdGU6IHd3dy5hbmRpc21pdGguY29tXHJcbi8vIHZlcnNpb246IDAuMVxyXG5cclxudmFyIGNhbklVc2UgPSAoZnVuY3Rpb24gKCkge1xyXG5cclxuICAgIC8qICBDT05GSUdVUkFUSU9OID0tPS09LT0tPS09LT0tPS09LT0tPS09LT0tPS09LT0tPS09LT0tPS09LT0tPS09LT0tPS09LT0tPS09LT0tICovXHJcblxyXG4gICAgLy8gIFVSTCB0byB0aGUgZGF0YSBmZWVkXHJcbiAgICB2YXIgU09VUkNFX0RBVEFfVVJMID0gJ2h0dHBzOi8vcmF3LmdpdGh1Yi5jb20vRnlyZC9jYW5pdXNlL21hc3Rlci9kYXRhLmpzb24nO1xyXG5cclxuICAgIC8qICBUdXJuIGF1dG8gcnVuIG9uIHBhZ2UgbG9hZCBvbiBvciBvZmYgd2l0aCBBVVRPX1JVTi5cclxuICAgICAgICBJZiB5b3UgdHVybiBpdCBvZmYsIGp1c3QgdXNlIGNhbklVc2UucmVuZGVyKCkgdG8ga2ljayBpdCBvZmYgYWdhaW4uXHJcbiAgICAgICAgSWYgeW91IGRvbid0IHdhbnQgdGhlIFdoZW5DYW5JVXNlIGRhdGEgdG8gbG9hZCBpbiB0aGUgYmFja2dyb3VuZCwgdHVybiBCRV9SRUFEWSB0byBmYWxzZS5cclxuICAgICovXHJcbiAgICB2YXIgQVVUT19SVU4gPSB0cnVlLFxyXG4gICAgICAgIEJFX1JFQURZID0gdHJ1ZTtcclxuXHJcbiAgICAvKiAgQ29uZmlndXJlIHRoZSBicm93c2VycyB5b3Ugd2FudCB0byBzaG93IGhlcmUuXHJcbiAgICAgICAgVGhlIG9yZGVyIGRlZmluZXMgdGhlIG9yZGVyIHRoZXkgd2lsbCBhcHBlYXIgb24gdGhlIHBhZ2UuXHJcblxyXG4gICAgICAgIEJyb3dzZXIgb3B0aW9ucyBhcmU6XHJcbiAgICAgICAgKiBhbmRyb2lkICAgLSBBbmRyb2lkXHJcbiAgICAgICAgKiBhbmRfZmYgICAgLSBBbmRyb2lkIEZpcmVmb3hcclxuICAgICAgICAqIGFuZF9jaHIgICAtIEFuZHJvaWQgQ2hyb21lXHJcbiAgICAgICAgKiBiYiAgICAgICAgLSBCbGFja2JlcnJ5XHJcbiAgICAgICAgKiBjaHJvbWUgICAgLSBHb29nbGUgQ2hyb21lXHJcbiAgICAgICAgKiBmaXJlZm94ICAgLSBNb3ppbGxhIEZpcmVmb3hcclxuICAgICAgICAqIGllICAgICAgICAtIEludGVybmV0IEV4cGxvcmVyXHJcbiAgICAgICAgKiBpb3Nfc2FmICAgLSBpT1MgU2FmYXJpXHJcbiAgICAgICAgKiBvcGVyYSAgICAgLSBPcGVyYVxyXG4gICAgICAgICogb3BfbWluaSAgIC0gT3BlcmEgTWluaVxyXG4gICAgICAgICogb3BfbW9iICAgIC0gT3BlcmEgTW9iaWxlXHJcbiAgICAgICAgKiBzYWZhcmkgICAgLSBBcHBsZSBTYWZhcmlcclxuICAgICovXHJcbiAgICB2YXIgQlJPV1NFUlMgPSBbJ2Nocm9tZScsICdmaXJlZm94JywgJ2llJywgJ29wZXJhJywgJ3NhZmFyaSddO1xyXG5cclxuICAgIC8vICBDdXN0b21pc2UgSFRNTCBoZXJlXHJcbiAgICB2YXIgVE1QTF9USVRMRSA9ICc8aDI+e3RpdGxlfTwvaDI+JywgLy8gZmVhdHVyZSB0aXRsZSB7dGl0bGV9XHJcbiAgICAgICAgVE1QTF9TVEFUVVMgPSAnPHAgY2xhc3M9XCJzdGF0dXNcIj57c3RhdHVzfTwvcD4nLCAvLyBmZWF0dXJlIHN0YXR1cyAoVzNDIFJlY29tbWVuZGF0aW9uKSB7c3RhdHVzfVxyXG4gICAgICAgIFRNUExfREVTQ1JJUFRJT04gPSAnPHA+U3Vwb3J0YWRvIGEgcGFydGlyIGRlOjwvcD4nLCAvLyBkZXNjcmlwdGlvbiB0byB1c2VyXHJcbiAgICAgICAgVE1QTF9ERVNLVE9QX1RJVExFID0gJycsIC8vIGRlc2t0b3AgaGVhZGVyXHJcbiAgICAgICAgVE1QTF9NT0JJTEVfVElUTEUgPSAnJywgLy8gbW9iaWxlIGhlYWRlclxyXG4gICAgICAgIFRNUExfU1VQUE9SVF9XUkFQUEVSID0gJzx1bCBjbGFzcz1cImFnZW50c1wiPntpdGVtc308L3VsPicsIC8vIHN1cHBvcnQgd3JhcHBlciB7aXRlbXN9XHJcbiAgICAgICAgVE1QTF9TVVBQT1JUID0gJzxsaSB0aXRsZT1cInticm93c2VyfSAtIHtzdXBwb3J0fVwiIGNsYXNzPVwiaWNvbi17YnJvd3NlcmNvZGV9IHtzdXBwb3J0Y29kZX1cIj48c3BhbiBjbGFzcz1cInZlcnNpb25cIj57dmVyc2lvbn17cHJlZml4ZWR9PC9zcGFuPjwvbGk+JyxcclxuICAgICAgICBUTVBMX1BSRUZJWF9OT1RFID0gJzxwPiogcmVxdWVyIHByZWZpeG8uPC9wPicsXHJcbiAgICAgICAgVE1QTF9MRUdFTkQgPSAnPHVsIGNsYXNzPVwibGVnZW5kXCI+PGxpPkxlZ2VuZGE6PC9saT48bGkgY2xhc3M9XCJ5XCI+U2ltPC9saT48bGkgY2xhc3M9XCJuXCI+TsOjbzwvbGk+PGxpIGNsYXNzPVwiYVwiPlBhcmNpYWw8L2xpPjxsaSBjbGFzcz1cInBcIj5Qb2x5ZmlsbDwvbGk+PC91bD4nLFxyXG4gICAgICAgIFRNUExfRk9PVEVSID0gJzxwIGNsYXNzPVwic3RhdHNcIj5EYWRvcyBkZSA8YSBocmVmPVwiaHR0cDovL2Nhbml1c2UuY29tLyNmZWF0PXtmZWF0dXJlfVwiIHRhcmdldD1cIl9ibGFua1wiPmNhbml1c2UuY29tPC9hPjwvcD4nLFxyXG4gICAgICAgIFRNUExfTE9BRElORyA9ICc8aDI+Q2FycmVnYW5kbzwvaDI+JyxcclxuICAgICAgICBUTVBMX0VSUk9SID0gJzxoMj5FcnJvPC9oMj48cD5GZWF0dXJlIFwie2ZlYXR1cmV9XCIgbsOjbyBlbmNvbnRyYWRhITwvcD4nO1xyXG5cclxuICAgIC8qIEVORCBDT05GSUdVUkFUSU9OID0tPS09LT0tPS09LT0tPS09LT0tPS09LT0tPS09LT0tPS09LT0tPS09LT0tPS09LT0tPS09LT0tPS0gKi9cclxuXHJcbiAgICB2YXIgY2FuSVVzZURhdGEsIC8vIHN0b3JlIGRhdGEgZm9yIG11bHRpcGxlIHVzZXMuXHJcbiAgICAgICAgc3RvcmVFbGVtZW50SWQsIC8vIHRlbXAgc3RvcmFnZSBmb3IgZWxlbWVudElkIGlmIHdlIG5lZWQgdG8gSlNPTlAgcmVxdWVzdFxyXG4gICAgICAgIHBvcHVsYXRlT25Mb2FkOyAvLyB0ZW1wIHN0b3JhZ2UgZm9yIGlmIHdlIHNob3VsZCBwb3B1bGF0ZVxyXG5cclxuXHJcblxyXG4gICAgLy8gZ2V0IGZlYXR1cmUgZGF0YSBiYXNlZCBvbiBmZWF0dXJlIG5hbWVcclxuICAgIGZ1bmN0aW9uIGdldEZlYXR1cmUoZmVhdHVyZU5hbWUpIHtcclxuICAgICAgICBmZWF0dXJlTmFtZSA9IGZlYXR1cmVOYW1lLnRvTG93ZXJDYXNlKCk7XHJcbiAgICAgICAgaWYgKGNhbklVc2VEYXRhLnF1ZXJ5KSB7XHJcbiAgICAgICAgICAgIHJldHVybiBjYW5JVXNlRGF0YS5xdWVyeS5yZXN1bHRzLmpzb24uZGF0YVtmZWF0dXJlTmFtZV07XHJcbiAgICAgICAgfSBlbHNlIGlmIChjYW5JVXNlRGF0YS5kYXRhKSB7XHJcbiAgICAgICAgICAgIHJldHVybiBjYW5JVXNlRGF0YS5kYXRhW2ZlYXR1cmVOYW1lXTtcclxuICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICByZXR1cm4gbnVsbDtcclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgLy8gZ2V0IHRoZSBmdWxsIHRleHQgZGVzY3JpcHRpb24gZm9yIHRoZSBzdXBwb3J0IHN0YXR1c1xyXG4gICAgZnVuY3Rpb24gZ2V0U3VwcG9ydFN0YXR1cyhrZXkpIHtcclxuICAgICAgICB2YXIgc3RhdHVzID0ge1xyXG4gICAgICAgICAgICBcInlcIjogXCJZZXNcIixcclxuICAgICAgICAgICAgXCJ4XCI6IFwiV2l0aCBQcmVmaXhcIixcclxuICAgICAgICAgICAgXCJuXCI6IFwiTm9cIixcclxuICAgICAgICAgICAgXCJhXCI6IFwiUGFydGlhbCBTdXBwb3J0XCIsXHJcbiAgICAgICAgICAgIFwicFwiOiBcIlBvbHlmaWxsXCIsXHJcbiAgICAgICAgICAgIFwidVwiOiBcIlVua25vd25cIlxyXG4gICAgICAgIH07XHJcblxyXG4gICAgICAgIHJldHVybiBzdGF0dXNba2V5XTtcclxuICAgIH1cclxuXHJcbiAgICAvLyBnZXQgdGhlIHNwZWNpZmljYXRpb24gc3RhdHVzXHJcbiAgICBmdW5jdGlvbiBnZXRTcGVjU3RhdHVzKGtleSkge1xyXG4gICAgICAgIHZhciBzdGF0dXMgPSB7XHJcbiAgICAgICAgICAgIFwicmVjXCI6IFwiVzNDIFJlY29tbWVuZGF0aW9uXCIsXHJcbiAgICAgICAgICAgIFwicHJcIjogXCJXM0MgUHJvcG9zZWQgUmVjb21tZW5kYXRpb25cIixcclxuICAgICAgICAgICAgXCJjclwiOiBcIlczQyBDYW5kaWRhdGUgUmVjb21tZW5kYXRpb25cIixcclxuICAgICAgICAgICAgXCJ3ZFwiOiBcIlczQyBXb3JraW5nIERyYWZ0XCIsXHJcbiAgICAgICAgICAgIFwib3RoZXJcIjogXCJOb24tVzNDLCBidXQgUmVwdXRhYmxlXCIsXHJcbiAgICAgICAgICAgIFwidW5vZmZcIjogXCJVbm9mZmljaWFsIG9yIFczQyAnTm90ZSdcIlxyXG4gICAgICAgIH07XHJcblxyXG4gICAgICAgIHJldHVybiBzdGF0dXNba2V5XSB8fCBcIlVua25vd25cIjtcclxuICAgIH1cclxuXHJcbiAgICAvLyBmaW5kIHRoZSBmaXJzdCB2ZXJzaW9uIHRoYXQgaGFkIHRoaXMgc3RhdHVzXHJcbiAgICBmdW5jdGlvbiBmaW5kKG5lZWRsZSwgaGF5c3RhY2spIHtcclxuXHJcbiAgICAgICAgdmFyIHJlc3VsdCA9IHtcclxuICAgICAgICAgICAgICAgIFwidmVyc2lvblwiOiAtMSxcclxuICAgICAgICAgICAgICAgIFwicHJlZml4ZWRcIjogZmFsc2VcclxuICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgY29tcGFyZSA9IC0xO1xyXG5cclxuICAgICAgICBmb3IgKHZhciBpdGVtIGluIGhheXN0YWNrKSB7XHJcbiAgICAgICAgICAgIGlmIChoYXlzdGFjay5oYXNPd25Qcm9wZXJ0eShpdGVtKSAmJiBoYXlzdGFja1tpdGVtXS5pbmRleE9mKG5lZWRsZSkgPiAtMSkge1xyXG4gICAgICAgICAgICAgICAgLy8gc29tZSBicm93c2VyIHZlcnNpb25zIGFyZSBmb3JtYXR0ZWQgbi1uLCB0YWtlIHRoZSBmaXJzdCBudW1iZXIgZm9yIGNvbXBhcmlzb25cclxuICAgICAgICAgICAgICAgIGNvbXBhcmUgPSBwYXJzZUZsb2F0KGl0ZW0uc3BsaXQoJy0nKVswXSk7XHJcbiAgICAgICAgICAgICAgICAvLyBpcyB0aGlzIHZlcnNpb24gbG93ZXIgdGhhbiB0aGUgY3VycmVudCB2ZXJzaW9uIHdlIGhhdmUgc3RvcmVkP1xyXG4gICAgICAgICAgICAgICAgaWYgKHJlc3VsdC52ZXJzaW9uID09PSAtMSB8fCByZXN1bHQudmVyc2lvbiA+IGNvbXBhcmUpIHtcclxuICAgICAgICAgICAgICAgICAgICByZXN1bHQudmVyc2lvbiA9IGNvbXBhcmU7XHJcbiAgICAgICAgICAgICAgICAgICAgcmVzdWx0LnByZWZpeGVkID0gKGhheXN0YWNrW2l0ZW1dLmluZGV4T2YoJ3gnKSA+IC0xKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgICAgICByZXR1cm4gcmVzdWx0O1xyXG4gICAgfVxyXG5cclxuICAgIGZ1bmN0aW9uIGZpbmRTdXBwb3J0KGJyb3dzZXJEYXRhKSB7XHJcbiAgICAgICAgdmFyIHN0YXR1cyA9IFsneScsICdhJywgJ3AnXSxcclxuICAgICAgICAgICAgcmVzdWx0ID0ge307XHJcbiAgICAgICAgLy8gZmluZCB3aGF0IHN1cHBvcnQgaXMgYXZhaWxhYmxlIGZvciB0aGlzIGJyb3dzZXJcclxuICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IHN0YXR1cy5sZW5ndGg7IGkrKykge1xyXG4gICAgICAgICAgICByZXN1bHQgPSBmaW5kKHN0YXR1c1tpXSwgYnJvd3NlckRhdGEpO1xyXG4gICAgICAgICAgICBpZiAocmVzdWx0LnZlcnNpb24gIT09IC0xKSB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4ge1xyXG4gICAgICAgICAgICAgICAgICAgICdyZXN1bHQnOiBzdGF0dXNbaV0sIC8vIHdoYXQgdHlwZSBvZiBzdXBwb3J0XHJcbiAgICAgICAgICAgICAgICAgICAgJ3ByZWZpeGVkJzogcmVzdWx0LnByZWZpeGVkLFxyXG4gICAgICAgICAgICAgICAgICAgICd2ZXJzaW9uJzogKHJlc3VsdC52ZXJzaW9uICE9PSAnMCcpID8gcmVzdWx0LnZlcnNpb24gOiAnMCcgLy8gdGhlIHZlcnNpb24gd2l0aCB0aGF0IHN1cHBvcnRcclxuICAgICAgICAgICAgICAgIH07XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICAgICAgcmV0dXJuIHtcclxuICAgICAgICAgICAgJ3Jlc3VsdCc6ICduJyxcclxuICAgICAgICAgICAgJ3ByZWZpeGVkJzogZmFsc2UsXHJcbiAgICAgICAgICAgICd2ZXJzaW9uJzogJ05vJ1xyXG4gICAgICAgIH07XHJcbiAgICB9XHJcblxyXG4gICAgLyogcHV0IHRoZSBkYXRhIGluIGEgbW9yZSBwbGF0YWJsZSBmb3JtYXQgKi9cclxuICAgIGZ1bmN0aW9uIGdlbmVyYXRlUmVzdWx0cyhmZWF0dXJlKSB7XHJcbiAgICAgICAgdmFyIGFnZW50cyA9IHt9LFxyXG4gICAgICAgICAgICByZXN1bHRzID0ge30sXHJcbiAgICAgICAgICAgIGN1cnJlbnRCcm93c2VyID0gJycsXHJcbiAgICAgICAgICAgIHN1cHBvcnQgPSB7fTtcclxuXHJcbiAgICAgICAgYWdlbnRzID0gY2FuSVVzZURhdGEuYWdlbnRzIHx8IGNhbklVc2VEYXRhLnF1ZXJ5LnJlc3VsdHMuanNvbi5hZ2VudHM7XHJcblxyXG4gICAgICAgIHJlc3VsdHMudGl0bGUgPSBmZWF0dXJlLnRpdGxlOyAvLyBmZWF0dXJlIG5hbWVcclxuICAgICAgICByZXN1bHRzLmNvZGUgPSBmZWF0dXJlOyAvLyBmZWF0dXJlIGNvZGU/XHJcbiAgICAgICAgcmVzdWx0cy5zdGF0dXMgPSBnZXRTcGVjU3RhdHVzKGZlYXR1cmUuc3RhdHVzKTsgLy8gZmVhdHVyZSBzcGVjaWZpY2F0aW9uIHN0YXR1c1xyXG4gICAgICAgIHJlc3VsdHMuYWdlbnRzID0gW107XHJcblxyXG4gICAgICAgIGZvciAodmFyIGkgPSAwLCBsID0gQlJPV1NFUlMubGVuZ3RoOyBpIDwgbDsgaSsrKSB7XHJcblxyXG4gICAgICAgICAgICBjdXJyZW50QnJvd3NlciA9IEJST1dTRVJTW2ldO1xyXG5cclxuICAgICAgICAgICAgaWYgKGFnZW50c1tjdXJyZW50QnJvd3Nlcl0pIHtcclxuXHJcbiAgICAgICAgICAgICAgICBzdXBwb3J0ID0gZmluZFN1cHBvcnQoZmVhdHVyZS5zdGF0c1tCUk9XU0VSU1tpXV0pO1xyXG5cclxuICAgICAgICAgICAgICAgIHJlc3VsdHMuYWdlbnRzLnB1c2goe1xyXG4gICAgICAgICAgICAgICAgICAgIFwiYnJvd3NlcmNvZGVcIjogY3VycmVudEJyb3dzZXIsXHJcbiAgICAgICAgICAgICAgICAgICAgXCJwcmVmaXhlZFwiOiBzdXBwb3J0LnByZWZpeGVkLFxyXG4gICAgICAgICAgICAgICAgICAgIFwic3VwcG9ydGNvZGVcIjogc3VwcG9ydC5yZXN1bHQsXHJcbiAgICAgICAgICAgICAgICAgICAgXCJzdXBwb3J0XCI6IGdldFN1cHBvcnRTdGF0dXMoc3VwcG9ydC5yZXN1bHQpLFxyXG4gICAgICAgICAgICAgICAgICAgIFwidGl0bGVcIjogYWdlbnRzW2N1cnJlbnRCcm93c2VyXS5icm93c2VyLFxyXG4gICAgICAgICAgICAgICAgICAgIFwidHlwZVwiOiBhZ2VudHNbY3VycmVudEJyb3dzZXJdLnR5cGUudG9Mb3dlckNhc2UoKSxcclxuICAgICAgICAgICAgICAgICAgICBcInZlcnNpb25cIjogc3VwcG9ydC52ZXJzaW9uXHJcbiAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcmV0dXJuIHJlc3VsdHM7XHJcbiAgICB9XHJcblxyXG5cclxuICAgIGZ1bmN0aW9uIGdlbmVyYXRlSHRtbChyZXN1bHRzKSB7XHJcblxyXG4gICAgICAgIHZhciBodG1sID0gJycsXHJcbiAgICAgICAgICAgIHJlc3VsdEh0bWwgPSAnJyxcclxuICAgICAgICAgICAgZGVza3RvcEh0bWwgPSAnJyxcclxuICAgICAgICAgICAgbW9iaWxlSHRtbCA9ICcnLFxyXG4gICAgICAgICAgICBwcmVmaXhlcyA9IGZhbHNlLFxyXG4gICAgICAgICAgICByZXN1bHQgPSB7fSxcclxuICAgICAgICAgICAgaSA9IDAsXHJcbiAgICAgICAgICAgIGwgPSAwO1xyXG5cclxuICAgICAgICByZXN1bHRIdG1sID0gVE1QTF9USVRMRS5yZXBsYWNlKCd7dGl0bGV9JywgcmVzdWx0cy50aXRsZSk7XHJcbiAgICAgICAgcmVzdWx0SHRtbCArPSBUTVBMX1NUQVRVUy5yZXBsYWNlKCd7c3RhdHVzfScsIHJlc3VsdHMuc3RhdHVzKTtcclxuICAgICAgICByZXN1bHRIdG1sICs9IFRNUExfREVTQ1JJUFRJT047XHJcblxyXG4gICAgICAgIGZvciAoaSA9IDAsIGwgPSByZXN1bHRzLmFnZW50cy5sZW5ndGg7IGkgPCBsOyBpKyspIHtcclxuICAgICAgICAgICAgcmVzdWx0ID0gcmVzdWx0cy5hZ2VudHNbaV07IC8vIHNpbXBseSB0aGluZ3NcclxuXHJcbiAgICAgICAgICAgIC8vIHdlIG5lZWQgdG8gc2hvdyB0aGF0IHByZWZpeCBub3RpY2UsIGNhcHRhaW5cclxuICAgICAgICAgICAgaWYgKHJlc3VsdC5wcmVmaXhlZCkge1xyXG4gICAgICAgICAgICAgICAgcHJlZml4ZXMgPSB0cnVlO1xyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICBodG1sID0gVE1QTF9TVVBQT1JULnJlcGxhY2UoL1xce2Jyb3dzZXJjb2RlXFx9L2csIHJlc3VsdC5icm93c2VyY29kZSlcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLnJlcGxhY2UoL1xce3ByZWZpeGVkXFx9L2csIChyZXN1bHQucHJlZml4ZWQgPT09IHRydWUpID8gJyonIDogJycpXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC5yZXBsYWNlKC9cXHtzdXBwb3J0Y29kZVxcfS9nLCByZXN1bHQuc3VwcG9ydGNvZGUpXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC5yZXBsYWNlKC9cXHtzdXBwb3J0XFx9L2csIHJlc3VsdC5zdXBwb3J0KVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAucmVwbGFjZSgvXFx7YnJvd3NlclxcfS9nLCByZXN1bHQudGl0bGUpXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC5yZXBsYWNlKC9cXHt2ZXJzaW9uXFx9L2csIHJlc3VsdC52ZXJzaW9uKTtcclxuXHJcbiAgICAgICAgICAgIGlmIChyZXN1bHQudHlwZSA9PT0gJ2Rlc2t0b3AnKSB7XHJcbiAgICAgICAgICAgICAgICBkZXNrdG9wSHRtbCArPSBodG1sO1xyXG4gICAgICAgICAgICB9IGVsc2UgaWYgKHJlc3VsdC50eXBlID09PSAnbW9iaWxlJykge1xyXG4gICAgICAgICAgICAgICAgbW9iaWxlSHRtbCArPSBodG1sO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICAvLyBvbmx5IHNob3cgaWYgd2UgYXJlIGluY2x1ZGluZyBkZXNrdG9wIGJyb3dzZXJzXHJcbiAgICAgICAgaWYgKGRlc2t0b3BIdG1sICE9PSAnJykge1xyXG4gICAgICAgICAgICByZXN1bHRIdG1sICs9IFRNUExfREVTS1RPUF9USVRMRTtcclxuICAgICAgICAgICAgcmVzdWx0SHRtbCArPSBUTVBMX1NVUFBPUlRfV1JBUFBFUi5yZXBsYWNlKC9cXHtpdGVtc1xcfS9nLCBkZXNrdG9wSHRtbCk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICAvLyBvbmx5IHNob3cgaWYgd2UgYXJlIGluY2x1ZGluZyBtb2JpbGUgYnJvd3NlcnNcclxuICAgICAgICBpZiAobW9iaWxlSHRtbCAhPT0gJycpIHtcclxuICAgICAgICAgICAgcmVzdWx0SHRtbCArPSBUTVBMX01PQklMRV9USVRMRTtcclxuICAgICAgICAgICAgcmVzdWx0SHRtbCArPSBUTVBMX1NVUFBPUlRfV1JBUFBFUi5yZXBsYWNlKC9cXHtpdGVtc1xcfS9nLCBtb2JpbGVIdG1sKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGlmIChwcmVmaXhlcykge1xyXG4gICAgICAgICAgICByZXN1bHRIdG1sICs9IFRNUExfUFJFRklYX05PVEU7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICByZXN1bHRIdG1sICs9IFRNUExfTEVHRU5EO1xyXG4gICAgICAgIHJlc3VsdEh0bWwgKz0gVE1QTF9GT09URVIucmVwbGFjZSgvXFx7ZmVhdHVyZVxcfS9nLCByZXN1bHRzLmZlYXR1cmVDb2RlKTtcclxuICAgICAgICByZXR1cm4gcmVzdWx0SHRtbDtcclxuICAgIH1cclxuXHJcbiAgICBmdW5jdGlvbiBnZW5lcmF0ZShlbGVtZW50SWQpIHtcclxuICAgICAgICB2YXIgJGNhbklVc2UgPSBbXSxcclxuICAgICAgICAgICAgJGluc3RhbmNlLFxyXG4gICAgICAgICAgICBmZWF0dXJlQ29kZSA9ICcnLFxyXG4gICAgICAgICAgICBmZWF0dXJlID0ge30sXHJcbiAgICAgICAgICAgIHJlc3VsdCA9IHt9LFxyXG4gICAgICAgICAgICBpID0gMCxcclxuICAgICAgICAgICAgbCA9IDA7XHJcblxyXG4gICAgICAgIGlmICh0eXBlb2YgZWxlbWVudElkID09PSBcInVuZGVmaW5lZFwiKSB7XHJcbiAgICAgICAgICAgICRjYW5JVXNlID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbCgnLmNhbml1c2UnKTtcclxuICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAkY2FuSVVzZS5wdXNoKGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKGVsZW1lbnRJZCkpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgbCA9ICRjYW5JVXNlLmxlbmd0aDtcclxuXHJcbiAgICAgICAgZm9yIChpID0gMDsgaSA8IGw7IGkrKykge1xyXG4gICAgICAgICAgICAkaW5zdGFuY2UgPSAkY2FuSVVzZVtpXTtcclxuICAgICAgICAgICAgZmVhdHVyZUNvZGUgPSAkaW5zdGFuY2UuZ2V0QXR0cmlidXRlKCdkYXRhLWZlYXR1cmUnKSB8fCAndW5rbm93bic7XHJcbiAgICAgICAgICAgIGZlYXR1cmUgPSBnZXRGZWF0dXJlKGZlYXR1cmVDb2RlKTtcclxuICAgICAgICAgICAgaWYgKGZlYXR1cmUpIHtcclxuICAgICAgICAgICAgICAgIHJlc3VsdCA9IGdlbmVyYXRlUmVzdWx0cyhmZWF0dXJlKTtcclxuICAgICAgICAgICAgICAgIHJlc3VsdC5mZWF0dXJlQ29kZSA9IGZlYXR1cmVDb2RlO1xyXG4gICAgICAgICAgICAgICAgJGluc3RhbmNlLmlubmVySFRNTCA9IGdlbmVyYXRlSHRtbChyZXN1bHQpO1xyXG4gICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgJGluc3RhbmNlLmlubmVySFRNTCA9IFRNUExfRVJST1IucmVwbGFjZSgvXFx7ZmVhdHVyZVxcfS9nLCBmZWF0dXJlQ29kZSk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgZnVuY3Rpb24gc2hvd0xvYWRpbmcoZWxlbWVudElkKSB7XHJcbiAgICAgICAgdmFyICRjYW5JVXNlID0gW10sXHJcbiAgICAgICAgICAgICRpbnN0YW5jZSxcclxuICAgICAgICAgICAgaSA9IDAsXHJcbiAgICAgICAgICAgIGwgPSAwO1xyXG5cclxuICAgICAgICBpZiAodHlwZW9mIGVsZW1lbnRJZCA9PT0gXCJ1bmRlZmluZWRcIikge1xyXG4gICAgICAgICAgICAkY2FuSVVzZSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoJy5jYW5pdXNlJyk7XHJcbiAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgJGNhbklVc2UucHVzaChkb2N1bWVudC5nZXRFbGVtZW50QnlJZChlbGVtZW50SWQpKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGwgPSAkY2FuSVVzZS5sZW5ndGg7XHJcblxyXG4gICAgICAgIGZvciAoaSA9IDA7IGkgPCBsOyBpKyspIHtcclxuICAgICAgICAgICAgJGluc3RhbmNlID0gJGNhbklVc2VbaV07XHJcbiAgICAgICAgICAgICRpbnN0YW5jZS5pbm5lckhUTUwgPSBUTVBMX0xPQURJTkc7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIC8qXHJcbiAgICAgKiBMb2FkIHRoZSBkYXRhIHRoYXQgd2lsbCBiZSB1c2VkIHRvIGRpc3BsYXkgaW5mb3JtYXRpb24uXHJcbiAgICAgKi9cclxuICAgIGZ1bmN0aW9uIGxvYWREYXRhKGVsZW1lbnRJZCwgcG9wdWxhdGUpIHtcclxuICAgICAgICB2YXIgdXJsID0gJycsXHJcbiAgICAgICAgICAgIHNjcmlwdCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ1NDUklQVCcpO1xyXG5cclxuICAgICAgICB1cmwgPSAnaHR0cDovL3F1ZXJ5LnlhaG9vYXBpcy5jb20vdjEvcHVibGljL3lxbD9xPScgK1xyXG4gICAgICAgICAgICAnc2VsZWN0ICogZnJvbSBqc29uIHdoZXJlIHVybCA9IFxcJycgKyBTT1VSQ0VfREFUQV9VUkwgKyAnXFwnJyArXHJcbiAgICAgICAgICAgICcmZm9ybWF0PWpzb24manNvbkNvbXBhdD1uZXcmY2FsbGJhY2s9Y2FuSVVzZURhdGFMb2FkZWQnO1xyXG5cclxuICAgICAgICAvLyByZW1lbWJlciB0aGVzZSBmb3Igd2hlbiBvdXIgSlNPTlAgcmV0dXJuc1xyXG4gICAgICAgIHN0b3JlRWxlbWVudElkID0gZWxlbWVudElkO1xyXG4gICAgICAgIHBvcHVsYXRlT25Mb2FkID0gcG9wdWxhdGU7XHJcblxyXG4gICAgICAgIHNjcmlwdC5zcmMgPSB1cmw7XHJcbiAgICAgICAgZG9jdW1lbnQuYm9keS5hcHBlbmRDaGlsZChzY3JpcHQpO1xyXG4gICAgfVxyXG5cclxuICAgIGZ1bmN0aW9uIHBvcHVsYXRlKGVsZW1lbnRJZCkge1xyXG4gICAgICAgIGlmICh0eXBlb2YgY2FuSVVzZURhdGEgPT09ICd1bmRlZmluZWQnKSB7XHJcbiAgICAgICAgICAgIHNob3dMb2FkaW5nKGVsZW1lbnRJZCk7XHJcbiAgICAgICAgICAgIGxvYWREYXRhKGVsZW1lbnRJZCwgdHJ1ZSk7XHJcbiAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgZ2VuZXJhdGUoZWxlbWVudElkKTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgLypcclxuICAgICAqIFB1YmxpYyBNZXRob2RzXHJcbiAgICAgKi9cclxuICAgIHJldHVybiB7XHJcbiAgICAgICAgcmVuZGVyOiBwb3B1bGF0ZSxcclxuICAgICAgICBkYXRhTG9hZGVkOiBmdW5jdGlvbiAoZGF0YSkge1xyXG4gICAgICAgICAgICBjYW5JVXNlRGF0YSA9IGRhdGE7XHJcbiAgICAgICAgICAgIGlmIChwb3B1bGF0ZU9uTG9hZCkge1xyXG4gICAgICAgICAgICAgICAgZ2VuZXJhdGUoc3RvcmVFbGVtZW50SWQpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSxcclxuICAgICAgICBpbml0OiAoZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICBpZiAoQVVUT19SVU4pIHtcclxuICAgICAgICAgICAgICAgIHBvcHVsYXRlKCk7XHJcbiAgICAgICAgICAgIH0gZWxzZSBpZiAoQkVfUkVBRFkpIHtcclxuICAgICAgICAgICAgICAgIGxvYWREYXRhKHVuZGVmaW5lZCwgZmFsc2UpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSkoKVxyXG4gICAgfTtcclxufSgpKTtcclxuXHJcbndpbmRvdy5jYW5JVXNlRGF0YUxvYWRlZCA9IGZ1bmN0aW9uIGNhbklVc2VEYXRhTG9hZGVkKGRhdGEpIHtcclxuICAgIGNhbklVc2UuZGF0YUxvYWRlZChkYXRhKTtcclxufTtcclxuIl19"}